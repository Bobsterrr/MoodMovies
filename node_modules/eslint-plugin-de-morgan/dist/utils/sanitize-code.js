'use strict'
Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' })
let sanitizeCode = code => {
  let stringLiterals = []
  let withoutStrings = code.replaceAll(
    /(?<quote>["'`])(?:\\.|(?!\k<quote>)[^\\])*\k<quote>/gu,
    match => {
      let placeholder = `__STRING_LITERAL_${stringLiterals.length}__`
      stringLiterals.push(match)
      return placeholder
    },
  )
  let withoutSingleLineComments = withoutStrings.replaceAll(/\/\/.*$/gmu, '')
  let withoutComments = withoutSingleLineComments.replaceAll(
    /\/\*[\s\S]*?\*\//gu,
    '',
  )
  let normalized = withoutComments
    .replaceAll(/\s+/gu, ' ')
    .replaceAll(/\(\s+/gu, '(')
    .replaceAll(/\s+\)/gu, ')')
    .trim()
  for (let [index, string_] of stringLiterals.entries()) {
    normalized = normalized.replace(`__STRING_LITERAL_${index}__`, string_)
  }
  return normalized
}
exports.sanitizeCode = sanitizeCode
